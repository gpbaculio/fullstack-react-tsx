(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),c=a.n(o),l=a(10),i=a(31),s=a(63),d=a(64),u=a(2),p="FETCH_USER_SUCCESS",m="FETCH_USER_REQUEST",f="FETCH_CURRENT_USER_FAILURE",g="LOGIN_REQUEST",b="LOGIN_SUCCESS",O="LOGIN_FAILURE",h="SIGNUP_REQUEST",E="SIGNUP_SUCCESS",v="SIGNUP_FAILURE",y="LOGOUT",j="CONFIRM_TOKEN_REQUEST",T="CONFIRM_TOKEN_SUCCESS",x="CONFIRM_TOKEN_FAILURE",C="CLEAR_ERROR",S={logIn:"",signUp:"",fetchUser:"",confirmToken:""},_={_id:"",email:"",token:"",confirmed:!1,loading:{logIn:!1,signUp:!1,fetchUser:!1,confirmToken:!1,app:!1},errors:S};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{fetchUser:!0})});case p:return Object(u.a)({},e,t.payload.user,{loading:Object(u.a)({},e.loading,{fetchUser:!1})});case f:return Object(u.a)({},e,{errors:Object(u.a)({},e.errors,{fetchUser:t.payload.error}),loading:Object(u.a)({},e.loading,{fetchUser:!1})});case h:return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{signUp:!0})});case E:return Object(u.a)({},e,t.payload.user,{loading:Object(u.a)({},e.loading,{signUp:!1})});case v:return Object(u.a)({},e,{errors:Object(u.a)({},e.errors,{signUp:t.payload.error}),loading:Object(u.a)({},e.loading,{signUp:!1})});case g:return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{logIn:!0})});case b:return Object(u.a)({},e,t.payload.user,{loading:Object(u.a)({},e.loading,{logIn:!1})});case O:return Object(u.a)({},e,{errors:Object(u.a)({},e.errors,{logIn:t.payload.error}),loading:Object(u.a)({},e.loading,{logIn:!1})});case j:return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{confirmToken:!0})});case T:return Object(u.a)({},e,{email:t.payload.email,confirmed:!0,loading:Object(u.a)({},e.loading,{confirmToken:!1})});case x:return Object(u.a)({},e,{errors:Object(u.a)({},e.errors,{confirmToken:t.payload.error}),loading:Object(u.a)({},e.loading,{confirmToken:!1})});case y:return Object(u.a)({},_);case C:return Object(u.a)({},e,{errors:S});default:return e}},I=a(34),w=a(18),A=a(46);function U(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var D={toggleComplete:!1,updateText:!1,deleteTodo:!1},L={toggleComplete:"",updateText:"",deleteTodo:""},N={ids:[],entities:{},loading:{addTodo:!1,fetchTodos:!1,clearCompleted:!1,toggleAll:!1},errors:{addTodo:"",fetchTodos:"",clearCompleted:"",toggleAll:""},filter:"All",page:1,searchText:"",count:0,countPerPage:9,activePage:1,showRefresh:!1},R=Object(i.combineReducers)({user:k,todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_SEARCH_TEXT":return Object(u.a)({},e,{searchText:""});case"ADD_TODO_REQUEST":return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{addTodo:!0})});case"ADD_TODO_SUCCESS":return Object(u.a)({},e,{count:e.count+1,ids:[t.payload.todo._id].concat(Object(A.a)(e.ids)),entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todo._id,Object(u.a)({},t.payload.todo))),loading:Object(u.a)({},e.loading,{addTodo:!1})});case"ADD_TODO_FAILURE":return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{addTodo:!1}),errors:Object(u.a)({},e.errors,{addTodo:t.payload.error})});case"FETCH_TODOS_REQUEST":return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{fetchTodos:!0})});case"FETCH_TODOS_SUCCESS":var a=Object(u.a)({},e,{entities:Object(u.a)({},t.payload.entities),ids:Object(A.a)(t.payload.ids),count:t.payload.count,loading:Object(u.a)({},e.loading,{fetchTodos:!1})});return console.log("statesuc ",a),a;case"FETCH_TODOS_FAILURE":return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{fetchTodos:!1}),errors:Object(u.a)({},e.errors,{fetchTodos:t.payload.error})});case"TOGGLE_TODOS_REQUEST":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todoId,Object(u.a)({},e.entities[t.payload.todoId],{complete:t.payload.complete,loading:Object(u.a)({},e.entities[t.payload.todoId].loading,{toggleComplete:!0}),errors:Object(u.a)({},e.entities[t.payload.todoId].errors,{toggleComplete:""})})))});case"TOGGLE_TODOS_SUCCESS":var n=e.count;return"All"!==e.filter&&(n-=1),Object(u.a)({},e,{count:n,entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todo._id,Object(u.a)({},t.payload.todo,{loading:Object(u.a)({},e.entities[t.payload.todo._id].loading,{toggleComplete:!1}),errors:Object(u.a)({},e.entities[t.payload.todo._id].errors,{toggleComplete:""})})))});case"TOGGLE_TODOS_FAILURE":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todoId,Object(u.a)({},e.entities[t.payload.todoId],{loading:Object(u.a)({},e.entities[t.payload.todoId].loading,{toggleComplete:!1}),errors:Object(u.a)({},e.entities[t.payload.todoId].errors,{toggleComplete:t.payload.error})})))});case"UPDATE_TODO_TEXT_REQUEST":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todoId,Object(u.a)({},e.entities[t.payload.todoId],{text:t.payload.text,loading:Object(u.a)({},e.entities[t.payload.todoId].loading,{updateText:!0}),errors:Object(u.a)({},e.entities[t.payload.todoId].errors,{updateText:""})})))});case"UPDATE_TODO_TEXT_SUCCESS":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todo._id,Object(u.a)({},t.payload.todo,{loading:Object(u.a)({},e.entities[t.payload.todo._id].loading,{updateText:!1}),errors:Object(u.a)({},e.entities[t.payload.todo._id].errors,{updateText:""})})))});case"UPDATE_TODO_TEXT_FAILURE":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todoId,Object(u.a)({},e.entities[t.payload.todoId],{text:t.payload.text,loading:Object(u.a)({},e.entities[t.payload.todoId].loading,{updateText:!1}),errors:Object(u.a)({},e.entities[t.payload.todoId].errors,{updateText:t.payload.error})})))});case"DELETE_TODO_REQUEST":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todoId,Object(u.a)({},e.entities[t.payload.todoId],{loading:Object(u.a)({},e.entities[t.payload.todoId].loading,{deleteTodo:!0}),errors:Object(u.a)({},e.entities[t.payload.todoId].errors,{deleteTodo:""})})))});case"DELETE_TODO_SUCCESS":var r=e.entities,o=(r[t.payload.todoId],Object(I.a)(r,[t.payload.todoId].map(U)));return Object(u.a)({},e,{entities:o,count:e.count-1,ids:e.ids.filter(function(e){return e!==t.payload.todoId})});case"DELETE_TODO_FAILURE":return Object(u.a)({},e,{entities:Object(u.a)({},e.entities,Object(w.a)({},t.payload.todoId,Object(u.a)({},e.entities[t.payload.todoId],{loading:Object(u.a)({},e.entities[t.payload.todoId].loading,{deleteTodo:!1}),errors:Object(u.a)({},e.entities[t.payload.todoId].errors,{deleteTodo:t.payload.error})})))});case"DELETE_COMPLETED_REQUEST":return Object(u.a)({},e,{loading:Object(u.a)({},e.loading,{clearCompleted:!0})});case"DELETE_COMPLETED_SUCCESS":var c=t.payload.todoIds,l=Object(u.a)({},e.entities);c.forEach(function(e){return delete l[e]});var i=e.ids.filter(function(e){return-1===c.indexOf(e)}),s=e.count-c.length;return Object(u.a)({},e,{count:s,ids:i,entities:l,loading:Object(u.a)({},e.loading,{clearCompleted:!1})});case"TOGGLE_ALL_TODO_REQUEST":var d=Object(u.a)({},e.entities);return t.payload.todoIds.forEach(function(e){return d[e].complete=t.payload.complete}),Object(u.a)({},e,{errors:Object(u.a)({},e.errors,{toggleAll:""}),entities:d,loading:Object(u.a)({},e.loading,{toggleAll:!0})});case"TOGGLE_ALL_TODO_SUCCESS":var p=e.count;return"All"!==e.filter&&(p-=Object.keys(t.payload.entities).length),Object(u.a)({},e,{count:p,entities:Object(u.a)({},e.entities,t.payload.entities),loading:Object(u.a)({},e.loading,{toggleAll:!1})});case"TOGGLE_ALL_TODO_FAILURE":return Object(u.a)({},e,{errors:Object(u.a)({},e.errors,{toggleAll:t.payload.error}),loading:Object(u.a)({},e.loading,{toggleAll:!1})});case"SET_SEARCH_TEXT":return Object(u.a)({},e,{searchText:t.payload.text});case"SET_PAGE":return Object(u.a)({},e,{page:t.payload.page});case"SET_FILTER":return Object(u.a)({},e,{filter:t.payload.filter});case"LOGOUT":return Object(u.a)({},N);default:return e}}});var P=a(21),F=a(22),M=(a(78),a(79),a(80),a(7)),G=a.n(M),z=a(9),Q=a(13),H=a(14),X=a(17),W=a(15),B=a(16),J=a(25),K=a(11),Y=a(23),$=a(145),q=a(146),V=a(147),Z=a(148),ee=a(149),te=a(150),ae=a(151),ne=a(152),re=a(153),oe=a(154),ce=a(155),le=a(156),ie=a(157),se=a(158),de=a(40),ue=a.n(de),pe=a(20),me=a.n(pe),fe=function(e){e?me.a.defaults.headers.common.authorization="Bearer ".concat(e):delete me.a.defaults.headers.common.authorization},ge=function(e){return function(e,t){var a=e-t;return a<2e4?"just now":a<6e4?"less than 1 min ago":a<36e5?"".concat(Math.round(a/6e4)," min ago"):a<864e5?"".concat(Math.round(a/36e5)," h ago"):a<2592e6?"".concat(Math.round(a/864e5)," days ago"):a<31536e6?"".concat(Math.round(a/2592e6)," mo ago"):"".concat(Math.round(a/31536e6)," years ago")}((new Date).getTime(),new Date(e).getTime())},be=function(){return{type:C}},Oe=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},errors:{server:"",email:"",password:""}},a.onChange=function(e){var t=a.state.data,n=e.target,r=n.name,o=n.value;a.setState({data:Object(u.a)({},t,Object(w.a)({},r,o))})},a.onSubmit=function(){var e=Object(z.a)(G.a.mark(function e(t){var n,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state.data,r=a.validate(n),a.setState({errors:r}),0!==Object.keys(r).length){e.next=7;break}return e.next=7,a.props.logIn(n,function(e){fe(e),a.props.history.push("/")});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.validate=function(e){var t={};return ue()(e.email)||(t.email="Invalid email"),e.password||(t.password="Can't be blank"),t},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=t.errors,n=this.props.error;n!==a.server&&this.setState(function(e){return{errors:Object(u.a)({},e.errors,{server:n})}})}},{key:"componentWillUnmount",value:function(){this.props.clearError()}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors;return r.a.createElement($.a,{style:{height:"100vh"}},r.a.createElement(q.a,{className:"align-items-center justify-content-center",style:{height:"100vh"}},r.a.createElement(V.a,{xs:"12",sm:"8",lg:"6"},r.a.createElement(Z.a,null,r.a.createElement(ee.a,null,"Welcome Back!"),r.a.createElement(te.a,null,r.a.createElement(ae.a,{onSubmit:this.onSubmit},!!a.server&&r.a.createElement(ne.a,{color:"danger"},a.server),r.a.createElement(re.a,null,r.a.createElement(oe.a,{className:"d-block",for:"email"},"Email",r.a.createElement(ce.a,{className:a.email?"form-control is-invalid":"form-control",value:t.email,onChange:this.onChange,type:"email",name:"email",id:"email",placeholder:"example@domain.com"}),r.a.createElement(le.a,null,a.email))),r.a.createElement(re.a,null,r.a.createElement(oe.a,{className:"d-block",for:"password"},"Password",r.a.createElement(ce.a,{className:a.password?"form-control is-invalid":"form-control",value:t.password,onChange:this.onChange,type:"password",name:"password",id:"password",placeholder:"Password"}),r.a.createElement(le.a,null,a.password))),r.a.createElement(ie.a,{disabled:this.props.loading,type:"submit",color:"primary",className:"btn-block"},"Login"),r.a.createElement(se.a,{className:"text-center"},r.a.createElement(P.b,{to:"/signup"},"Signup")," if you do not have an account")))))))}}]),t}(r.a.Component),he=Object(l.b)(function(e){var t=e.user;return{loading:t.loading.logIn,error:t.errors.logIn}},{logIn:function(e,t){var a=e.email,n=e.password;return function(){var e=Object(z.a)(G.a.mark(function e(r,o){var c,l;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:g}),e.prev=1,e.next=4,me.a.post("/api/auth",{email:a,password:n});case 4:c=e.sent,l=c.data.user,localStorage.setItem("token",l.token),t(l.token),r({type:b,payload:{user:l}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({type:O,payload:{error:e.t0.response.data.error}});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,a){return e.apply(this,arguments)}}()},clearError:be})(Object(F.f)(Oe));function Ee(){var e=Object(J.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Ee=function(){return e},e}var ve=Object(K.css)(Ee()),ye=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={error:""},a.componentDidMount=function(){var e=a.props;(0,e.confirmToken)(e.match.params.token)},a.componentWillUnmount=function(){a.props.clearError()},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=t.error;this.props.error!==a&&this.setState({error:this.props.error})}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.confirmed,n=e.email,o=this.state.error;return r.a.createElement($.a,null,!!t&&r.a.createElement(Y.ClipLoader,{css:ve,sizeUnit:"px",size:50,color:"#123abc",loading:t}),o&&r.a.createElement(ne.a,{color:"danger"},r.a.createElement("h3",{className:"alert-heading text-center"},o)),a&&r.a.createElement(ne.a,{color:"success"},r.a.createElement("h4",{className:"alert-heading"},"Congratulations! ",r.a.createElement("strong",null,n)," You have successfully verified your account")))}}]),t}(n.Component),je=Object(l.b)(function(e){var t=e.user;return{loading:t.loading.confirmToken,error:t.errors.confirmToken,confirmed:!!t.confirmed,email:t.email}},{confirmToken:function(e){return function(){var t=Object(z.a)(G.a.mark(function t(a,n){var r,o;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:j}),t.prev=1,t.next=4,me.a.post("/api/auth/confirm",{token:e});case 4:r=t.sent,o=r.data.user,a({type:T,payload:{email:o.email}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:x,payload:{error:t.t0.response.data.error}});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,a){return t.apply(this,arguments)}}()},clearError:be})(ye),Te=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},errors:{server:"",email:"",password:""}},a.onChange=function(e){var t=a.state.data,n=e.target,r=n.name,o=n.value;a.setState({data:Object(u.a)({},t,Object(w.a)({},r,o))})},a.onSubmit=function(){var e=Object(z.a)(G.a.mark(function e(t){var n,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state.data,r=a.validate(n),a.setState({errors:r}),0!==Object.keys(r).length){e.next=7;break}return e.next=7,a.props.signUp(n,function(e){fe(e),a.props.history.push("/")});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.validate=function(e){var t={};return ue()(e.email)||(t.email="Invalid email"),e.password||(t.password="Can't be blank"),t},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=t.errors,n=this.props.error;n!==a.server&&this.setState(function(e){return{errors:Object(u.a)({},e.errors,{server:n})}})}},{key:"componentWillUnmount",value:function(){this.props.clearError()}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors;return r.a.createElement($.a,{style:{height:"100vh"}},r.a.createElement(q.a,{className:"align-items-center justify-content-center",style:{height:"100vh"}},r.a.createElement(V.a,{xs:"12",sm:"8",lg:"6"},r.a.createElement(Z.a,null,r.a.createElement(ee.a,null,"Join the Club!"),r.a.createElement(te.a,null,r.a.createElement(ae.a,{onSubmit:this.onSubmit},!!a.server&&r.a.createElement(ne.a,{color:"danger"},a.server),r.a.createElement(re.a,null,r.a.createElement(oe.a,{className:"d-block",for:"email"},"Email",r.a.createElement(ce.a,{className:a.email?"form-control is-invalid":"form-control",value:t.email,onChange:this.onChange,type:"email",name:"email",id:"email",placeholder:"example@domain.com"}),r.a.createElement(le.a,null,a.email))),r.a.createElement(re.a,null,r.a.createElement(oe.a,{className:"d-block",for:"password"},"Password",r.a.createElement(ce.a,{className:a.password?"form-control is-invalid":"form-control",value:t.password,onChange:this.onChange,type:"password",name:"password",id:"password",placeholder:"Password"}),r.a.createElement(le.a,null,a.password))),r.a.createElement(ie.a,{disabled:this.props.loading,type:"submit",color:"primary",className:"btn-block"},"Sign Up"),r.a.createElement(se.a,{className:"text-center"},"or ",r.a.createElement(P.b,{to:"/login"},"Login")," if you have an account")))))))}}]),t}(r.a.Component),xe=Object(l.b)(function(e){var t=e.user;return{loading:t.loading.signUp,error:t.errors.signUp}},{signUp:function(e,t){var a=e.email,n=e.password;return function(){var e=Object(z.a)(G.a.mark(function e(r,o){var c,l;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:h}),e.prev=1,e.next=4,me.a.post("/api/user",{email:a,password:n});case 4:c=e.sent,l=c.data.user,localStorage.setItem("token",l.token),t(l.token),r({type:E,payload:{user:l}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({type:v,payload:{error:e.t0.response.data.error}});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,a){return e.apply(this,arguments)}}()},clearError:be})(Object(F.f)(Te)),Ce=a(68),Se=a(171),_e=a(159),ke=a(160),Ie=a(161),we=a(162),Ae=a(163),Ue=a(42),De=new Ue.b.Entity("todos"),Le=function(e){var t=e.page,a=e.filter,n=e.searchText;return function(){var e=Object(z.a)(G.a.mark(function e(r,o){var c,l,i,s,d;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"FETCH_TODOS_REQUEST"}),e.prev=1,c={offset:9*(t-1),limit:9,filter:a},n&&(c.searchText=n),e.next=7,me.a.get("/api/user/todos",{params:c});case 7:l=e.sent,i=Object(Ue.a)(l.data.todos.map(function(e){return Object(u.a)({},e,{id:e._id,loading:D,errors:L})}),[De]),s=i.result,d=i.entities.todos,r({type:"FETCH_TODOS_SUCCESS",payload:{ids:s,entities:d,count:l.data.count}}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("error!",e.t0),r({type:"FETCH_TODOS_FAILURE",payload:{error:e.t0}});case 16:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t,a){return e.apply(this,arguments)}}()},Ne=function(e){return function(t){t({type:"SET_PAGE",payload:{page:e}})}},Re=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},a.componentDidMount=function(){a.setState({text:a.props.todoText})},a.onSubmit=function(){var e=Object(z.a)(G.a.mark(function e(t){var n,r,o,c,l,i;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state.text.trim(),r=a.props,o=r.updateText,c=r.handleIsEditing,l=r.todoId,i=r.todoText,!n||n===i){e.next=8;break}return e.next=6,o({todoId:l,text:n});case 6:e.next=9;break;case 8:a.setState({text:i});case 9:c();case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(w.a)({},r,n))},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){return r.a.createElement(ae.a,{onSubmit:this.onSubmit},r.a.createElement(ce.a,{type:"text",name:"text",value:this.state.text,onChange:this.onChange,onBlur:this.onSubmit}))}}]),t}(n.Component),Pe={updateText:function(e){var t=e.todoId,a=e.text;return function(){var e=Object(z.a)(G.a.mark(function e(n,r){var o,c,l,i;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r(),c=o.user,n({type:"UPDATE_TODO_TEXT_REQUEST",payload:{todoId:t,text:a}}),e.prev=2,e.next=5,me.a.post("/api/todo/updateText",{todoId:t,text:a,userId:c._id});case 5:l=e.sent,i=l.data.todo,n({type:"UPDATE_TODO_TEXT_SUCCESS",payload:{todo:i}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n({type:"UPDATE_TODO_TEXT_FAILURE",payload:{error:e.t0.response.data.error,todoId:t,text:a}});case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}()}},Fe=Object(l.b)(null,Pe)(Re);function Me(){var e=Object(J.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Me=function(){return e},e}var Ge=Object(K.css)(Me()),ze=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={isEditing:!1,modal:!1},a.handleToggleComplete=Object(z.a)(G.a.mark(function e(){var t,n,r,o,c;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.complete,r=t._id,o=t.userId,c=t.toggleComplete,e.next=3,c({todoId:r,userId:o,complete:!n});case 3:case"end":return e.stop()}},e)})),a.handleIsEditing=function(){a.setState(function(e){return{isEditing:!e.isEditing}})},a.toggleModal=function(){a.setState(function(e){return{modal:!e.modal}})},a.onDelete=Object(z.a)(G.a.mark(function e(){var t,n,r,o;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.deleteTodo,r=t._id,o=t.userId,e.next=3,n({todoId:r,userId:o});case 3:case"end":return e.stop()}},e)})),a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.state.isEditing,t=this.props,a=t.loading,n=t.complete,o=t.filter,c=t.text,l=t._id,i=t.createdAt,s=t.updatedAt;return"Active"===o&&n&&!a.toggleComplete?null:"Completed"!==o||n||a.toggleComplete?r.a.createElement(V.a,{lg:"4",md:"6",sm:"12"},r.a.createElement(Z.a,{className:"mx-auto mt-4 w-75 p-3"},r.a.createElement("div",{className:"d-flex justify-content-center"},!!a.toggleComplete&&r.a.createElement("div",{className:"position-absolute d-flex align-items-center"},r.a.createElement(Y.ClipLoader,{css:Ge,sizeUnit:"px",size:15,color:"#123abc",loading:a.toggleComplete}),r.a.createElement("span",{className:"ml-1"},"Toggling Complete...")),!!a.updateText&&r.a.createElement("div",{className:"position-absolute d-flex align-items-center"},r.a.createElement(Y.ClipLoader,{css:Ge,sizeUnit:"px",size:15,color:"#123abc",loading:a.updateText}),r.a.createElement("span",{className:"ml-1"},"Updating Text..."))),r.a.createElement(Se.a,{isOpen:this.state.modal,toggle:this.toggleModal},r.a.createElement(_e.a,{toggle:this.toggleModal},"Delete todo: ",c),r.a.createElement(ke.a,{className:"text-center"},"Please Confirm to proceed."),r.a.createElement(Ie.a,null,r.a.createElement(ie.a,{color:"danger",onClick:this.onDelete},a.deleteTodo?r.a.createElement("div",null,r.a.createElement(Y.ClipLoader,{css:Ge,sizeUnit:"px",size:15,color:"#fff",loading:a.deleteTodo}),"Deleting Todo..."):"Confirm"),r.a.createElement(ie.a,{color:"secondary",onClick:this.toggleModal},"Cancel"))),r.a.createElement(te.a,null,r.a.createElement(we.a,{className:"d-flex justify-content-between"},r.a.createElement(ce.a,{onChange:this.handleToggleComplete,checked:n,type:"checkbox"}),e?r.a.createElement(Fe,{todoId:l,todoText:c,handleIsEditing:this.handleIsEditing}):r.a.createElement("div",{onDoubleClick:this.handleIsEditing,style:{textDecoration:n?"line-through":"none",cursor:"pointer"},className:"mx-auto"},c),r.a.createElement(Ce.a,{onClick:this.toggleModal,style:{color:"red",cursor:"pointer"}})),r.a.createElement(Ae.a,{className:"mt-2 text-center",style:{borderTop:"solid black 1px"}},i===s?"Added ".concat(ge(i)):"Updated ".concat(ge(s)))))):null}}]),t}(n.Component),Qe={toggleComplete:function(e){var t=e.todoId,a=e.complete,n=e.userId;return function(){var e=Object(z.a)(G.a.mark(function e(r,o){var c,l;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"TOGGLE_TODOS_REQUEST",payload:{todoId:t,complete:a}}),e.prev=1,e.next=4,me.a.post("/api/todo/toggleComplete",{todoId:t,complete:a,userId:n});case 4:c=e.sent,l=c.data.todo,r({type:"TOGGLE_TODOS_SUCCESS",payload:{todo:l}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r({type:"TOGGLE_TODOS_FAILURE",payload:{error:e.t0.response.data.error,todoId:t,complete:!a}});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}()},deleteTodo:function(e){var t=e.todoId,a=e.userId;return function(){var e=Object(z.a)(G.a.mark(function e(n,r){var o,c;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"DELETE_TODO_REQUEST",payload:{todoId:t}}),e.prev=1,e.next=4,me.a.post("/api/todo/delete",{todoId:t,userId:a});case 4:o=e.sent,c=o.data,n({type:"DELETE_TODO_SUCCESS",payload:{todoId:c.todoId}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n({type:"DELETE_TODO_FAILURE",payload:{todoId:t,error:e.t0.response.data.error}});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}()}},He=Object(l.b)(function(e){var t=e.user,a=e.todos;return{userId:t._id,page:a.page,filter:a.filter}},Qe)(ze);function Xe(){var e=Object(J.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Xe=function(){return e},e}var We=Object(K.css)(Xe()),Be=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.fetchTodos({page:1,filter:a.props.filter})},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ids,a=e.entities,n=e.loading,o=t.map(function(e){return a[e]});return n?r.a.createElement(V.a,{sm:"12"},r.a.createElement("div",{className:"mt-5 mb-5 d-flex align-items-center justify-content-center"},r.a.createElement(Y.ClipLoader,{css:We,sizeUnit:"px",size:50,color:"#123abc",loading:n}))):o.map(function(e){return r.a.createElement(He,Object.assign({key:e._id},e))})}}]),t}(n.Component),Je={fetchTodos:Le},Ke=Object(l.b)(function(e){var t=e.todos;return{entities:t.entities,ids:t.ids,filter:t.filter,loading:t.loading.fetchTodos}},Je)(Be);function Ye(){var e=Object(J.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Ye=function(){return e},e}Object(K.css)(Ye());var $e=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},a.onChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.onSubmit=function(){var e=Object(z.a)(G.a.mark(function e(t){var n;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=a.state.text.trim())){e.next=6;break}return e.next=5,a.props.addTodo({text:n,userId:a.props.userId});case 5:a.setState({text:""});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:" form-inline justify-content-center mx-auto mt-4 mb-xs-1 mb-md-5 align-items-start ",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",id:"text",name:"text",value:this.props.loading?"Adding ".concat(this.state.text,"..."):this.state.text,placeholder:"Add Todo",disabled:this.props.loading,onChange:this.onChange,className:"form-control w-75"}))}}]),t}(n.Component),qe={addTodo:function(e){var t=e.text,a=e.userId;return function(){var e=Object(z.a)(G.a.mark(function e(n,r){var o,c;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"ADD_TODO_REQUEST"}),e.prev=1,e.next=4,me.a.post("/api/todo",{text:t,userId:a});case 4:o=e.sent,c=o.data.todo,n({type:"ADD_TODO_SUCCESS",payload:{todo:Object(u.a)({},c,{loading:D,errors:L})}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n({type:"ADD_TODO_FAILURE",payload:{error:e.t0.response.data.error}});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}()}},Ve=Object(l.b)(function(e){var t=e.todos,a=e.user;return{loading:t.loading.addTodo,userId:a._id}},qe)($e),Ze=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={text:""},a.onChange=function(e){a.setState({text:e.target.value.trim()})},a.onSubmit=function(){var e=Object(z.a)(G.a.mark(function e(t){var n,r,o,c,l;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state.text,r=a.props,o=r.fetchTodos,c=r.filter,l=r.setSearchText,!n){e.next=7;break}return l(n),e.next=7,o({page:1,filter:c,searchText:n});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onClearText=function(){var e=a.props,t=e.clearSearchText,n=e.fetchTodos,r=e.filter;e.searchText&&a.setState({text:""},function(){t(),n({page:1,filter:r})})},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.state.text;return r.a.createElement(ae.a,{className:" form-inline justify-content-center mx-auto mt-4 mb-xs-1 mb-md-5 align-items-start ",onSubmit:this.onSubmit},r.a.createElement(ce.a,{placeholder:"Search todos",value:e,className:"form-control w-75",onChange:this.onChange}),r.a.createElement(ie.a,{onClick:this.onClearText,style:{color:"red",fontSize:"18px"},className:"border-0",color:"link"},"clear"))}}]),t}(n.Component),et={fetchTodos:Le,setSearchText:function(e){return function(t){t({type:"SET_SEARCH_TEXT",payload:{text:e}})}},clearSearchText:function(){return function(e){e({type:"CLEAR_SEARCH_TEXT"})}}},tt=Object(l.b)(function(e){var t=e.todos;return{filter:t.filter,searchText:t.searchText}},et)(Ze),at=a(164);function nt(){var e=Object(J.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return nt=function(){return e},e}var rt=Object(K.css)(nt()),ot=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={completeAll:!1,clearCompletedModal:!1},a.componentDidUpdate=function(e){var t=a.props.completeAll;t!==e.completeAll&&a.setState({completeAll:t})},a.toggleModal=function(){a.setState(function(e){return{clearCompletedModal:!e.clearCompletedModal}})},a.handleToggleAll=function(){a.setState(function(e){return{completeAll:!e.completeAll}},Object(z.a)(G.a.mark(function e(){var t,n,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.filter,r=t.toggleAll,e.next=3,r(a.state.completeAll);case 3:if("All"===n||!a.props.count){e.next=6;break}return e.next=6,a.props.fetchTodos({page:1,filter:n,searchText:a.props.searchText});case 6:case"end":return e.stop()}},e)})))},a.handleClearCompleted=Object(z.a)(G.a.mark(function e(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.clearCompleted();case 2:a.toggleModal();case 3:case"end":return e.stop()}},e)})),a.handleFilterClick=function(){var e=Object(z.a)(G.a.mark(function e(t){var n,r,o,c,l,i,s,d,u,p;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.name,r=a.props,o=r.history,c=r.fetchTodos,l=r.setFilter,i=r.setPage,s=r.searchText,d=r.match,u=r.activePage,o.push("".concat(d.url,"?filter=").concat(n,"&?page=").concat(u)),p={page:1,filter:n},s&&(p.searchText=s),l(n),i(1),e.next=9,c(p);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.ids,a=e.entities,n=t.map(function(e){return a[e]}).every(function(e){return e.complete});this.setState({completeAll:n})}},{key:"render",value:function(){var e=this.props,t=e.ids,a=e.entities,n=e.filter,o=e.loading,c=e.count,l=t.map(function(e){return a[e]});"All"!==n&&(l=l.filter(function(e){return"Active"===n?!e.complete:e.complete}));var i=l.every(function(e){return!e.complete});return r.a.createElement(q.a,{className:"my-3"},r.a.createElement(V.a,{lg:"2",className:"d-flex justify-content-center align-items-center"},"Total: ",c),r.a.createElement(V.a,{lg:"8",className:"filter d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"d-flex align-items-center mr-4"},r.a.createElement(ce.a,{onChange:this.handleToggleAll,type:"checkbox",className:"mt-0",checked:this.state.completeAll,disabled:!c}),o.toggleAll?r.a.createElement("div",null,r.a.createElement(Y.ClipLoader,{css:rt,sizeUnit:"px",size:15,color:"#123abc",loading:o.toggleAll}),r.a.createElement("span",{className:"ml-1"},"Toggling All... ")):"Toggle All"),r.a.createElement("div",{className:"nav-container d-flex justify-content-around"},r.a.createElement(at.a,null,r.a.createElement(ie.a,{disabled:"All"===n,size:"sm",color:"primary",name:"All",onClick:this.handleFilterClick},"All"),r.a.createElement(ie.a,{disabled:"Active"===n,size:"sm",color:"primary",name:"Active",onClick:this.handleFilterClick},"Active"),r.a.createElement(ie.a,{disabled:"Completed"===n,size:"sm",color:"primary",name:"Completed",onClick:this.handleFilterClick},"Completed")))),r.a.createElement(V.a,{lg:"2",className:"d-flex align-items-center justify-content-center"},r.a.createElement(Se.a,{isOpen:this.state.clearCompletedModal,toggle:this.toggleModal},r.a.createElement(_e.a,{toggle:this.toggleModal},"Delete Multiple todos"),r.a.createElement(ke.a,null,r.a.createElement("div",null,"You're about to delete the following. Please confirm to proceed."),r.a.createElement("ul",null,t.filter(function(e){return a[e].complete}).map(function(e){return r.a.createElement("li",{key:e},a[e].text)}))),r.a.createElement(Ie.a,null,r.a.createElement(ie.a,{color:"danger",onClick:this.handleClearCompleted},o.clearCompleted?r.a.createElement("div",null,r.a.createElement(Y.ClipLoader,{css:rt,sizeUnit:"px",size:15,color:"#fff",loading:o.clearCompleted}),"Deleting Todo..."):"Confirm"),r.a.createElement(ie.a,{color:"secondary",onClick:this.toggleModal},"Cancel"))),r.a.createElement(ie.a,{onClick:this.toggleModal,disabled:i,size:"sm",color:"danger"},"Clear Completed")))}}]),t}(n.Component),ct={clearCompleted:function(){return function(){var e=Object(z.a)(G.a.mark(function e(t,a){var n,r,o,c,l,i,s,d;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),r=n.todos,o=r.ids,c=r.entities,l=n.user,i=o.filter(function(e){return c[e].complete}),t({type:"DELETE_COMPLETED_REQUEST"}),e.prev=3,e.next=6,me.a.post("/api/todo/deleteMany",{todoIds:i,userId:l._id});case 6:s=e.sent,d=s.data.todoIds,t({type:"DELETE_COMPLETED_SUCCESS",payload:{todoIds:d}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t({type:"DELETE_COMPLETED_FAILURE",payload:{todoIds:i,error:e.t0.response.data.error}});case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t,a){return e.apply(this,arguments)}}()},fetchTodos:Le,setFilter:function(e){return function(t){t({type:"SET_FILTER",payload:{filter:e}})}},setPage:Ne,toggleAll:function(e){return function(){var t=Object(z.a)(G.a.mark(function t(a,n){var r,o,c,l,i,s,d,p,m,f;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(),o=r.todos,c=o.ids,l=o.entities,i=r.user,s=c.filter(function(t){return l[t].complete!==e}),a({type:"TOGGLE_ALL_TODO_REQUEST",payload:{todoIds:s,complete:e}}),t.prev=3,t.next=6,me.a.post("/api/todo/toggleCompleteMany",{todoIds:s,userId:i._id,complete:e});case 6:d=t.sent,p=d.data.todos,m=Object(Ue.a)(p.map(function(e){return Object(u.a)({},e,{id:e._id,loading:D,errors:L})}),[De]),f=m.entities,a({type:"TOGGLE_ALL_TODO_SUCCESS",payload:{entities:f.todos}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),a({type:"TOGGLE_ALL_TODO_FAILURE",payload:{error:t.t0.response.data.error}});case 15:case"end":return t.stop()}},t,null,[[3,12]])}));return function(e,a){return t.apply(this,arguments)}}()}},lt=Object(l.b)(function(e){var t=e.todos;return{count:t.count,ids:t.ids,entities:t.entities,filter:t.filter,searchText:t.searchText,activePage:t.activePage,completeAll:t.ids.map(function(e){return t.entities[e]}).every(function(e){return e.complete}),loading:t.loading}},ct)(Object(F.f)(ot)),it=a(67),st=a.n(it),dt=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).onPageChange=function(){var e=Object(z.a)(G.a.mark(function e(t){var n,r,o,c,l,i;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.fetchTodos,o=n.setPage,c=n.filter,l=n.searchText,i={page:t,filter:c},l&&(i.searchText=l),e.next=5,r(i);case 5:o(t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onRefresh=function(){var e=a.props,t=e.fetchTodos,n=e.filter;t({page:e.activePage,filter:n,searchText:e.searchText})},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props,t=e.activePage,a=e.count,n=e.filter,o=e.loading,c=e.countPerPage,l=e.showRefresh,i=e.searchText,s=e.ids,d=e.entities,u=s.map(function(e){return d[e]});u.length;return i&&"All"!==n&&u.filter(function(e){return"Active"===n?!e.complete:e.complete}).length,r.a.createElement(r.a.Fragment,null,a||o?r.a.createElement("div",{className:"d-flex flex-column mt-3"},l&&r.a.createElement(ie.a,{color:"primary",className:"btn-block",onClick:this.onRefresh},"Refresh Page"),r.a.createElement(st.a,{activePage:t,itemsCountPerPage:c,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.onPageChange})):r.a.createElement(ne.a,{color:"primary"},"You have no ","All"===n?"":n," todos yet."))}}]),t}(n.Component),ut={fetchTodos:Le,setPage:Ne},pt=Object(l.b)(function(e){var t=e.todos;return{count:t.count,filter:t.filter,loading:t.loading.fetchTodos,activePage:t.page,countPerPage:t.countPerPage,showRefresh:t.showRefresh,searchText:t.searchText,entities:t.entities,ids:t.ids}},ut)(dt),mt=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props.confirmed;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement(q.a,null,r.a.createElement(V.a,{xs:"12",md:"6"},e?r.a.createElement(Ve,null):r.a.createElement(ne.a,{className:"text-center mx-auto mt-4 mb-xs-1 mb-md-5",color:"primary"},"Please confirm your account to Add Todo")),r.a.createElement(V.a,{xs:"12",md:"6"},r.a.createElement(tt,null)),r.a.createElement(V.a,{sm:"12"},r.a.createElement(lt,null)),r.a.createElement(Ke,null))),r.a.createElement($.a,null,r.a.createElement(q.a,null,r.a.createElement(V.a,null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(pt,null))))))}}]),t}(r.a.Component),ft=Object(l.b)(function(e){return{confirmed:e.user.confirmed}},null)(Object(F.f)(mt)),gt=Object(l.b)(function(e){var t=e.user;return{isAuthenticated:!!t._id&&!!t.email}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(I.a)(e,["isAuthenticated","component"]);return r.a.createElement(F.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(F.a,{to:"/"}):r.a.createElement(a,e)}}))}),bt=Object(l.b)(function(e){var t=e.user;return{isAuthenticated:!!t._id&&!!t.email}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(I.a)(e,["isAuthenticated","component"]);return r.a.createElement(F.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(F.a,{to:"/login"})}}))}),Ot=a(165),ht=a(166),Et=a(167),vt=a(168),yt=a(169),jt=a(170),Tt=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.logOut=function(e){e.preventDefault(),localStorage.removeItem("token"),delete me.a.defaults.headers.common.authorization,a.props.logOut()},a.toggle=function(){var e=a.state.isOpen;a.setState({isOpen:!e})},a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props,t=e._id,a=e.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot.a,{color:"light",light:!0,expand:"md"},r.a.createElement($.a,null,r.a.createElement(P.b,{to:"/home",className:"navbar-brand"},"Glendon Philipp Baculio"),r.a.createElement(ht.a,{onClick:this.toggle}),r.a.createElement(Et.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(vt.a,{className:"ml-auto",navbar:!0},a&&t?r.a.createElement(r.a.Fragment,null,r.a.createElement(yt.a,null,r.a.createElement(jt.a,{disabled:!0,style:{color:"black"}},r.a.createElement("strong",null,this.props.email))),r.a.createElement(yt.a,null,r.a.createElement("button",{type:"button",style:{backgroundColor:"#F8F9FA",border:"none",cursor:"pointer"},className:"nav-link",onClick:this.logOut},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(yt.a,null,r.a.createElement(P.b,{className:"nav-link",to:"/login"},"Login")),r.a.createElement(yt.a,null,r.a.createElement(P.b,{className:"nav-link",to:"/signup"},"Signup"))))))))}}]),t}(r.a.Component),xt=Object(l.b)(function(e){var t=e.user;return{email:t.email,_id:t._id}},{logOut:function(){return{type:y}}})(Object(F.f)(Tt));function Ct(){var e=Object(J.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Ct=function(){return e},e}var St=Object(K.css)(Ct()),_t=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(X.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=Object(z.a)(G.a.mark(function e(){var t;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fe(t);case 3:if(!t||"".concat(window.location.href).includes("/confirmation")){e.next=6;break}return e.next=6,a.props.fetchUser();case 6:case"end":return e.stop()}},e)})),a}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.loading?r.a.createElement("div",{style:{left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .1)"},className:"d-flex position-absolute align-items-center justify-content-center"},r.a.createElement(Y.ClipLoader,{css:St,sizeUnit:"px",size:100,color:"#123abc",loading:this.props.loading})):r.a.createElement(r.a.Fragment,null,r.a.createElement(xt,null),r.a.createElement(F.d,null,r.a.createElement(F.b,{exact:!0,path:"/confirmation/:token",component:je}),r.a.createElement(gt,{path:"/signup",exact:!0,component:xe}),r.a.createElement(gt,{path:"/login",exact:!0,component:he}),r.a.createElement(bt,{exact:!0,path:"/(home)?/:filter?",component:ft}))))}}]),t}(r.a.Component),kt={fetchUser:function(){return function(){var e=Object(z.a)(G.a.mark(function e(t,a){var n,r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:m}),e.prev=1,e.next=4,me.a.get("/api/user/current");case 4:n=e.sent,r=n.data.user,t({type:p,payload:{user:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:f,payload:{error:e.t0}});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}()}},It=Object(l.b)(function(e){return{loading:e.user.loading.fetchUser}},kt)(_t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var wt=function(){var e=[s.a],t=i.applyMiddleware.apply(void 0,e);return Object(i.createStore)(R,Object(d.composeWithDevTools)(t))}();c.a.render(r.a.createElement(function(){return r.a.createElement(l.a,{store:wt},r.a.createElement(P.a,null,r.a.createElement(F.b,{path:"/",component:It})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,a){e.exports=a(144)},79:function(e,t,a){},80:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.e99d3604.chunk.js.map